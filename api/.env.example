# ===============================================
# SmartAudit API - Environment Variables
# ===============================================

# -----------------------------------------------
# Azure Storage Configuration
# -----------------------------------------------
# Connection string para Azure Blob Storage
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=your-storage-account;AccountKey=your-key;EndpointSuffix=core.windows.net

# -----------------------------------------------
# Azure SQL Database Configuration
# -----------------------------------------------
# Servidor de Azure SQL (e.g., myserver.database.windows.net)
AZURE_SQL_SERVER=smau-dev-sql.database.windows.net

# Nombre de la base de datos
AZURE_SQL_DATABASE=smau-dev-sqldb

# Connection string (OPCIONAL - Solo para desarrollo/fallback)
# Si se proporciona, se usará en lugar de Managed Identity
# En producción con Managed Identity, dejar vacío o comentar
# AZURE_SQL_CONNECTION_STRING=DRIVER={ODBC Driver 18 for SQL Server};SERVER=smau-dev-sql.database.windows.net;DATABASE=smau-dev-sqldb;UID=user;PWD=password;Encrypt=yes;TrustServerCertificate=no;Connection Timeout=30;

# Tenant ID para el registro de auditoría
AZURE_SQL_TENANT_ID=101

# Workspace ID para el registro de auditoría
AZURE_SQL_WORKSPACE_ID=101

# User ID por defecto para auditoría (cuando no hay autenticación)
AZURE_SQL_DEFAULT_USER_ID=1

# Habilitar/deshabilitar registro de auditoría
AZURE_SQL_AUDIT_ENABLED=true

# -----------------------------------------------
# Application Configuration
# -----------------------------------------------
# Entorno (development, production)
ENVIRONMENT=development

# Puerto del servidor
PORT=8001

# Debug mode
DEBUG=false

# -----------------------------------------------
# Azure Managed Identity (Producción)
# -----------------------------------------------
# Estas variables las configura Azure automáticamente cuando se usa Managed Identity
# No es necesario configurarlas manualmente
# AZURE_CLIENT_ID=<se configura automáticamente>
# MSI_ENDPOINT=<se configura automáticamente>
# IDENTITY_ENDPOINT=<se configura automáticamente>

# -----------------------------------------------
# Notas de Configuración
# -----------------------------------------------
#
# Desarrollo Local (con Azure CLI):
#   1. Ejecutar: az login
#   2. Configurar AZURE_SQL_SERVER y AZURE_SQL_DATABASE
#   3. No configurar AZURE_SQL_CONNECTION_STRING
#   4. La aplicación usará Azure CLI credentials automáticamente
#
# Desarrollo Local (sin Azure CLI):
#   1. Configurar AZURE_SQL_CONNECTION_STRING con credenciales
#   2. La aplicación usará el connection string
#
# Producción en Azure (Managed Identity):
#   1. Configurar Managed Identity en Azure Container Apps/Function
#   2. Configurar AZURE_SQL_SERVER y AZURE_SQL_DATABASE
#   3. No configurar AZURE_SQL_CONNECTION_STRING
#   4. Dar permisos a la Managed Identity en Azure SQL:
#      - CREATE USER [nombre-managed-identity] FROM EXTERNAL PROVIDER;
#      - ALTER ROLE db_datareader ADD MEMBER [nombre-managed-identity];
#      - ALTER ROLE db_datawriter ADD MEMBER [nombre-managed-identity];
#      - GRANT EXECUTE ON SCHEMA::workspace TO [nombre-managed-identity];
#
